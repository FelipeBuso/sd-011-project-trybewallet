(this["webpackJsonpsd-0x-project-trybewallet"]=this["webpackJsonpsd-0x-project-trybewallet"]||[]).push([[0],{29:function(e,t,a){},34:function(e,t,a){e.exports=a(50)},43:function(e,t,a){},45:function(e,t,a){},47:function(e,t,a){},48:function(e,t,a){},49:function(e,t,a){},50:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(20),l=a.n(c),i=a(18),o=a(8),s=a(3),u=a(15),d=a(4),p=a(5),h=a(2),m=a(7),E=a(6),v=(a(43),function(e){Object(m.a)(a,e);var t=Object(E.a)(a);function a(){var e;return Object(d.a)(this,a),(e=t.call(this)).state={email:"",password:"",disableButton:!0},e.handlerChange=e.handlerChange.bind(Object(h.a)(e)),e.checkPassword=e.checkPassword.bind(Object(h.a)(e)),e.checkEmail=e.checkEmail.bind(Object(h.a)(e)),e}return Object(p.a)(a,[{key:"handlerChange",value:function(e){var t,a=this,n=e.target,r=n.name,c=n.value;this.setState((t={},Object(u.a)(t,r,c),Object(u.a)(t,"disableButton",!0),t),(function(){a.checkEmail()&&a.checkPassword()&&a.setState({disableButton:!1})}))}},{key:"checkPassword",value:function(){return this.state.password.length>5}},{key:"checkEmail",value:function(){var e=this.state.email;return/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/.test(e)}},{key:"render",value:function(){var e=this,t=this.state,a=t.email,n=t.password,c=t.disableButton,l=this.props.saveEmail;return r.a.createElement("div",{className:"login-page"},r.a.createElement("div",{className:"login-logo"},r.a.createElement("h1",null,"Trybewallet")),r.a.createElement("div",{className:"login-fields"},r.a.createElement("input",{name:"email",type:"text","data-testid":"email-input",onChange:function(t){return e.handlerChange(t)},value:a,placeholder:"Digite um e-mail valido"}),r.a.createElement("input",{name:"password",type:"text","data-testid":"password-input",onChange:function(t){return e.handlerChange(t)},value:n,placeholder:"Digite a senha com no m\xednimo 6 caracteres"}),r.a.createElement(i.b,{to:{pathname:"carteira"}},r.a.createElement("button",{disabled:c,type:"button",onClick:function(){return l(a)}},"Entrar"))))}}]),a}(r.a.Component)),b=Object(o.b)(null,(function(e){return{saveEmail:function(t){return e({type:"SAVE_EMAIL_USER",payload:t})}}}))(v),f=(a(45),function(e){Object(m.a)(a,e);var t=Object(E.a)(a);function a(){var e;return Object(d.a)(this,a),(e=t.call(this)).state={totalValue:0},e.exchangeExpense=e.exchangeExpense.bind(Object(h.a)(e)),e.createListOfExpenses=e.createListOfExpenses.bind(Object(h.a)(e)),e.sumExpenses=e.sumExpenses.bind(Object(h.a)(e)),e.updateTotalValue=e.updateTotalValue.bind(Object(h.a)(e)),e}return Object(p.a)(a,[{key:"componentDidMount",value:function(){this.updateTotalValue()}},{key:"componentDidUpdate",value:function(e){var t=this.props.expenses;e.expenses!==t&&this.updateTotalValue()}},{key:"exchangeExpense",value:function(e){var t=e.exchangeRates,a=Object.entries(t).filter((function(t){return t[1].code===e.currency}));return parseFloat(e.value)*parseFloat(a[0][1].ask)}},{key:"createListOfExpenses",value:function(){var e=this,t=this.props.expenses,a=[];return t.map((function(t){return a.push(e.exchangeExpense(t))})),a}},{key:"sumExpenses",value:function(){return this.createListOfExpenses().reduce((function(e,t){return e+t}),0)}},{key:"updateTotalValue",value:function(){var e=this.sumExpenses();this.setState({totalValue:e})}},{key:"render",value:function(){var e=this.props.userEmail,t=this.state.totalValue;return r.a.createElement("section",{className:"section-header"},r.a.createElement("div",{className:"logo"},r.a.createElement("h2",null,"Trybewallet")),r.a.createElement("div",{className:"data-user"},r.a.createElement("label",{htmlFor:"email-field"},"Email:",r.a.createElement("span",{"data-testid":"email-field"},e)),r.a.createElement("div",{className:"expenses-user"},r.a.createElement("label",{htmlFor:"total-field"},"Total de gastos: $",r.a.createElement("span",{"data-testid":"total-field"},parseFloat(100*t/100).toFixed(2))),r.a.createElement("span",{"data-testid":"header-currency-field"},"BRL"))))}}]),a}(n.Component)),x=Object(o.b)((function(e){return{userEmail:e.user.email,expenses:e.wallet.expenses}}))(f);f.defaultProps={userEmail:"alguem@algo.com",expenses:{}};var g=a(26),y=a.n(g),j=a(31);function O(){return(O=Object(j.a)(y.a.mark((function e(){var t,a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://economia.awesomeapi.com.br/json/all");case 2:return t=e.sent,e.next=5,t.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var C=function(e){Object(m.a)(a,e);var t=Object(E.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var e=this.props,t=e.handleChange,a=e.value;return r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"m\xe9todo de pagamento"},"M\xe9todo de pagamento:",r.a.createElement("select",{id:"m\xe9todo de pagamento",name:"method","data-testid":"method-input",onChange:function(e){return t(e)},value:a},r.a.createElement("option",{value:"Dinheiro"},"Dinheiro"),r.a.createElement("option",{value:"Cart\xe3o de cr\xe9dito"},"Cart\xe3o de cr\xe9dito"),r.a.createElement("option",{value:"Cart\xe3o de d\xe9bito"},"Cart\xe3o de d\xe9bito"))))}}]),a}(n.Component),k=function(e){Object(m.a)(a,e);var t=Object(E.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var e=this.props,t=e.handleChange,a=e.value;return r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"tag"},"Tag:",r.a.createElement("select",{id:"tag",name:"tag","data-testid":"tag-input",onChange:function(e){return t(e)},value:a},r.a.createElement("option",{value:"Alimenta\xe7\xe3o"},"Alimenta\xe7\xe3o"),r.a.createElement("option",{value:"Lazer"},"Lazer"),r.a.createElement("option",{value:"Trabalho"},"Trabalho"),r.a.createElement("option",{value:"Transporte"},"Transporte"),r.a.createElement("option",{value:"Sa\xfade"},"Sa\xfade"))))}}]),a}(n.Component),w=(a(47),function(e){Object(m.a)(a,e);var t=Object(E.a)(a);function a(){var e;return Object(d.a)(this,a),(e=t.call(this)).state={value:"",description:"",currency:"USD",method:"Dinheiro",tag:"Alimenta\xe7\xe3o"},e.getCurrencys=e.getCurrencys.bind(Object(h.a)(e)),e.optionsCurrency=e.optionsCurrency.bind(Object(h.a)(e)),e.handleChange=e.handleChange.bind(Object(h.a)(e)),e.createObjectExpense=e.createObjectExpense.bind(Object(h.a)(e)),e.saveExpenseWallet=e.saveExpenseWallet.bind(Object(h.a)(e)),e}return Object(p.a)(a,[{key:"componentDidMount",value:function(){var e=this;(function(){return O.apply(this,arguments)})().then((function(t){return e.getCurrencys(t)}))}},{key:"getCurrencys",value:function(e){(0,this.props.saveApiCurrencyes)(Object.keys(e).filter((function(e){return"USDT"!==e})))}},{key:"optionsCurrency",value:function(){return this.props.wallet.currencies.map((function(e,t){return r.a.createElement("option",{key:t,value:e},e)}))}},{key:"handleChange",value:function(e){var t=e.target,a=t.name,n=t.value;this.setState(Object(u.a)({},a,n))}},{key:"createObjectExpense",value:function(){var e=this.props.wallet,t=this.state,a=t.value,n=t.description,r=t.currency,c=t.method,l=t.tag;return{id:e.expenses.length,value:a,description:n,currency:r,method:c,tag:l,exchangeRates:{}}}},{key:"saveExpenseWallet",value:function(){(0,this.props.saveExpense)(this.createObjectExpense()),this.setState({value:"",description:"",currency:"",method:"",tag:""})}},{key:"render",value:function(){var e=this,t=this.state,a=t.value,n=t.description,c=t.currency,l=t.method,i=t.tag;return r.a.createElement("form",{className:"form-input-expense"},r.a.createElement("label",{htmlFor:"valor"},"Valor:",r.a.createElement("input",{type:"number",id:"valor",name:"value",min:"0",onChange:function(t){return e.handleChange(t)},value:a})),r.a.createElement("label",{htmlFor:"descri\xe7\xe3o"},"Descri\xe7\xe3o:",r.a.createElement("input",{id:"descri\xe7\xe3o",type:"text",name:"description",onChange:function(t){return e.handleChange(t)},value:n})),r.a.createElement("label",{htmlFor:"moeda"},"Moeda:",r.a.createElement("select",{id:"moeda",name:"currency",onChange:function(t){return e.handleChange(t)},value:c},this.optionsCurrency())),r.a.createElement(C,{value:l,handleChange:this.handleChange}),r.a.createElement(k,{value:i,handleChange:this.handleChange}),r.a.createElement("button",{type:"button",onClick:function(){return e.saveExpenseWallet()}},"Adicionar despesa"))}}]),a}(n.Component)),S=Object(o.b)((function(e){return{wallet:e.wallet}}),(function(e){return{saveExpense:function(t){return e(function(e){return function(t){fetch("https://economia.awesomeapi.com.br/json/all").then((function(e){return e.json()})).then((function(a){var n=e;n.exchangeRates=a,t({type:"SAVE_EXPENSE_WALLET",payload:n})})).catch((function(e){return console.log(e)}))}}(t))},saveApiCurrencyes:function(t){return e({type:"SAVE_CURRENCYES",payload:t})}}}))(w);w.defaultProps={wallet:[]};var F=a(14),N=a.n(F),V=function(e){Object(m.a)(a,e);var t=Object(E.a)(a);function a(){var e;return Object(d.a)(this,a),(e=t.call(this)).state={exchangeUsed:"",exchangeValue:0},e.extractExchangeObject=e.extractExchangeObject.bind(Object(h.a)(e)),e.exctractExchangeName=e.exctractExchangeName.bind(Object(h.a)(e)),e.extractExchangeValue=e.extractExchangeValue.bind(Object(h.a)(e)),e.updateState=e.updateState.bind(Object(h.a)(e)),e.deleteExpense=e.deleteExpense.bind(Object(h.a)(e)),e}return Object(p.a)(a,[{key:"componentDidMount",value:function(){this.updateState()}},{key:"componentDidUpdate",value:function(e){var t=this.props.expense;e.expense!==t&&this.updateState()}},{key:"updateState",value:function(){var e=this.extractExchangeObject(),t=this.exctractExchangeName(e),a=this.extractExchangeValue(e);console.log(e),this.setState({exchangeUsed:t[0],exchangeValue:a})}},{key:"extractExchangeObject",value:function(){var e=this.props.expense,t=e.exchangeRates,a=e.currency,n=Object.entries(t).filter((function(e){return e[1].code===a}));return console.log(n),n}},{key:"exctractExchangeName",value:function(e){var t=e[0][1].name.split("/");return console.log(t[0]),t}},{key:"extractExchangeValue",value:function(e){var t=e[0][1].ask;return parseFloat(t)}},{key:"deleteExpense",value:function(e){var t=this.props,a=t.expenses,n=t.deleteExpense;n(a.filter((function(t){return t.id!==e})))}},{key:"render",value:function(){var e=this,t=this.props,a=t.expense,n=a.description,c=a.tag,l=a.method,i=a.value,o=a.id,s=t.editExpense,u=this.state,d=u.exchangeUsed,p=u.exchangeValue;return r.a.createElement("tr",{className:"table-row"},r.a.createElement("td",{name:n,id:n},n),r.a.createElement("td",{name:c,id:c},c),r.a.createElement("td",{name:l,id:l},l),r.a.createElement("td",{id:i,name:i},i),r.a.createElement("td",{name:d,id:d},d),r.a.createElement("td",{name:parseFloat(100*p/100).toFixed(2),id:parseFloat(100*p/100).toFixed(2)},parseFloat(100*p/100).toFixed(2)),r.a.createElement("td",{name:parseFloat(i*p*100/100).toFixed(2),id:parseFloat(i*p*100/100).toFixed(2)},parseFloat(i*p*100/100).toFixed(2)),r.a.createElement("td",{name:"Real",id:"Real"},"Real"),r.a.createElement("td",null,r.a.createElement("button",{type:"button","data-testid":"delete-btn",onClick:function(){return e.deleteExpense(o)}},"Excluir"),r.a.createElement("button",{type:"button","data-testid":"edit-btn",onClick:function(){return s(o)}},"Alterar despesa")))}}]),a}(n.Component);V.defaultProps={expense:N.a.shape({id:"",description:"",tag:"",method:"",value:"",currency:"",exchangeRates:{}}),expenses:N.a.shape({description:"",tag:"",method:"",value:"",currency:"",exchangeRates:{}})};var T=Object(o.b)((function(e){return{expenses:e.wallet.expenses}}),(function(e){return{deleteExpense:function(t){return e({type:"DELETE_EXPENSE_WALLET",payload:t})},editExpense:function(t){return e({type:"OPEN_EDIT_EXPENSE",payload:t})}}}))(V),D=(a(48),function(e){Object(m.a)(a,e);var t=Object(E.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var e=this.props.expenses;return r.a.createElement("div",null,r.a.createElement("table",{className:"table-section"},r.a.createElement("thead",null,r.a.createElement("tr",{className:"table-header"},r.a.createElement("th",{id:"Descri\xe7\xe3o"},"Descri\xe7\xe3o"),r.a.createElement("th",{id:"Tag"},"Tag"),r.a.createElement("th",{id:"M\xe9todo de pagamento"},"M\xe9todo de pagamento"),r.a.createElement("th",{id:"Valor"},"Valor"),r.a.createElement("th",{id:"Moeda"},"Moeda"),r.a.createElement("th",{id:"C\xe2mbio utilizado"},"C\xe2mbio utilizado"),r.a.createElement("th",{id:"Valor convertido"},"Valor convertido"),r.a.createElement("th",{id:"Moeda de convers\xe3o"},"Moeda de convers\xe3o"),r.a.createElement("th",{id:"Editar/Excluir"},"Editar/Excluir"))),r.a.createElement("tbody",null,e.map((function(e){return r.a.createElement(T,{key:e.id,expense:e})})))))}}]),a}(n.Component)),A=Object(o.b)((function(e){return{expenses:e.wallet.expenses}}))(D);D.defaultProps={expenses:N.a.shape({description:"",tag:"",method:"",value:"",currency:"",exchangeRates:{}})};var R=a(17),_=(a(29),function(e){Object(m.a)(a,e);var t=Object(E.a)(a);function a(){var e;return Object(d.a)(this,a),(e=t.call(this)).state={id:"",value:"",description:"",currency:"",method:"",tag:"",exchangeRates:[]},e.handleChange=e.handleChange.bind(Object(h.a)(e)),e.getExpenseFromStore=e.getExpenseFromStore.bind(Object(h.a)(e)),e.optionsCurrency=e.optionsCurrency.bind(Object(h.a)(e)),e.saveEditedExpensesWallet=e.saveEditedExpensesWallet.bind(Object(h.a)(e)),e}return Object(p.a)(a,[{key:"componentDidMount",value:function(){this.getExpenseFromStore()}},{key:"getExpenseFromStore",value:function(){var e=this.props.wallet,t=e.idEdit,a=e.expenses.filter((function(e){return e.id===t}));console.log(a[0].id),this.setState({id:a[0].id,value:a[0].value,description:a[0].description,currency:a[0].currency,method:a[0].method,tag:a[0].tag,exchangeRates:a[0].exchangeRates})}},{key:"createObjectExpense",value:function(){var e=this.state;return{id:e.id,value:e.value,description:e.description,currency:e.currency,method:e.method,tag:e.tag,exchangeRates:e.exchangeRates}}},{key:"optionsCurrency",value:function(){return this.props.wallet.currencies.map((function(e,t){return r.a.createElement("option",{key:t,value:e},e)}))}},{key:"saveEditedExpensesWallet",value:function(){var e=this.state.id,t=this.props,a=t.wallet.expenses,n=t.saveEditedExpenses,r=a.filter((function(t){return t.id!==e})),c=this.createObjectExpense();n([].concat(Object(R.a)(r),[c]).sort((function(e,t){return e.id-t.id})))}},{key:"handleChange",value:function(e){var t=e.target,a=t.name,n=t.value;this.setState(Object(u.a)({},a,n))}},{key:"render",value:function(){var e=this,t=this.state,a=t.value,n=t.description,c=t.currency,l=t.method,i=t.tag;return r.a.createElement("form",{className:"form-edit-expense"},r.a.createElement("label",{htmlFor:"valor"},"Valor:",r.a.createElement("input",{type:"number",id:"valor",name:"value",min:"0","data-testid":"value-input",onChange:function(t){return e.handleChange(t)},value:a})),r.a.createElement("label",{htmlFor:"descri\xe7\xe3o"},"Descri\xe7\xe3o:",r.a.createElement("input",{id:"descri\xe7\xe3o",type:"text",name:"description","data-testid":"description-input",onChange:function(t){return e.handleChange(t)},value:n})),r.a.createElement("label",{htmlFor:"currency"},"Moeda:",r.a.createElement("select",{id:"currency",name:"currency","data-testid":"currency-input",onChange:function(t){return e.handleChange(t)},value:c},this.optionsCurrency())),r.a.createElement(C,{value:l,handleChange:this.handleChange}),r.a.createElement(k,{value:i,handleChange:this.handleChange}),r.a.createElement("button",{type:"button",onClick:function(){return e.saveEditedExpensesWallet()}},"Editar despesa"))}}]),a}(n.Component)),L=Object(o.b)((function(e){return{wallet:e.wallet}}),(function(e){return{saveEditedExpenses:function(t){return e({type:"SAVE_EDITED_EXPENSES",payload:t})}}}))(_);_.defaultProps={wallet:[]};var P=function(e){Object(m.a)(a,e);var t=Object(E.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var e=this.props.edit;return r.a.createElement("div",{className:"page-wallet"},r.a.createElement(x,null),e?r.a.createElement(L,null):r.a.createElement(S,null),r.a.createElement(A,null))}}]),a}(r.a.Component),M=Object(o.b)((function(e){return{edit:e.wallet.edit}}))(P);a(49);var W=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(s.c,null,r.a.createElement(s.a,{exact:!0,path:"/",component:b}),r.a.createElement(s.a,{path:"/carteira",component:M})))},U=a(16),X=a(32),z=a(33),B=a(10),I={email:""};var $=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SAVE_EMAIL_USER":return Object(B.a)(Object(B.a)({},e),{},{email:t.payload});default:return e}},Z={currencies:[],expenses:[],edit:!1,idEdit:""};var J=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SAVE_CURRENCYES":return Object(B.a)(Object(B.a)({},e),{},{currencies:Object(R.a)(t.payload)});case"SAVE_EXPENSE_WALLET":return Object(B.a)(Object(B.a)({},e),{},{expenses:[].concat(Object(R.a)(e.expenses),[t.payload])});case"DELETE_EXPENSE_WALLET":return Object(B.a)(Object(B.a)({},e),{},{expenses:Object(R.a)(t.payload)});case"OPEN_EDIT_EXPENSE":return Object(B.a)(Object(B.a)({},e),{},{edit:!0,idEdit:t.payload});case"SAVE_EDITED_EXPENSES":return Object(B.a)(Object(B.a)({},e),{},{expenses:Object(R.a)(t.payload),edit:!1});default:return e}},Y=Object(U.combineReducers)({user:$,wallet:J}),q=Object(U.createStore)(Y,Object(X.composeWithDevTools)(Object(U.applyMiddleware)(z.a)));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(i.a,null,r.a.createElement(o.a,{store:q},r.a.createElement(W,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[34,1,2]]]);
//# sourceMappingURL=main.663dc0a9.chunk.js.map